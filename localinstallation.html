<html>
<head lang="UTF-8"> 
    <meta charset="UTF-8">
    <title>Kainos Whiteboard by KainosSoftwareLtd</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>

<body>
    	<section class="page-header">
      		<h1 class="project-name">Kainos Whiteboard</h1>
      		<h2 class="project-tagline">An interactive collaborative whiteboard web application</h2>
            <a href="https://github.com/KainosSoftwareLtd/Whiteboard" class="btn">View on GitHub</a>
            <a href="https://github.com/KainosSoftwareLtd/Whiteboard/zipball/master" class="btn">Download .zip</a>
            <a href="https://github.com/KainosSoftwareLtd/Whiteboard/tarball/master" class="btn">Download .tar.gz</a>
    	</section> 

        <center>
        <a HREF="index.html" class = "mainlinks">Home</a>
        <a HREF="background.html" class = "mainlinks">Background</a>
        <a HREF="functionality.html" class = "mainlinks">Functionality</a>
        <a HREF="localinstallation.html" class = "mainlinks">Local Installation</a>
        <a HREF="futureplans.html" class = "mainlinks">Future Plans</a>
    </center>

		<section class="main-content">
    	<h1>
			<a id="functionality" class="anchor" href="#functionality" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Local Installation
		</h1>

        <h3>
<a id="prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prerequisites</h3>

<p>You will need to download:</p>

<ul>
<li>Node.js version 0.10.25 - The installer for this can be found here: <a href="https://nodejs.org/en/blog/release/v0.10.25/">https://nodejs.org/en/blog/release/v0.10.25/</a> </li>
<li>Npm version 3.3.10 - Installation instructions for this can be found here: <a href="https://www.versioneye.com/nodejs/npm/3.3.10">https://www.versioneye.com/nodejs/npm/3.3.10</a>
</li>
</ul>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h3>

<ol>
<li>In Terminal/Command Line run: git clone <a href="https://github.com/KainosSoftwareLtd/Whiteboard.git">https://github.com/KainosSoftwareLtd/Whiteboard.git</a> </li>
<li>In the whiteboard folder run npm install to download all required dependencies.</li>
<li>Change directory to the bin folder and run node www</li>
<li>You now can access the site at http://localhost:3000/ </li>
</ol>

<hr>

<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h1>

<h3>
<a id="ssl" class="anchor" href="#ssl" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SSL</h3>
<p>You will need to generate an SSL key and certificate in order for the program to run on a HTTPS server and thus avoid any issues with browsers like Chrome denying access to your localhost.</p>
<p>These can be generated on Mac by using Keychain Access. Please follow the instructions found <a href="https://certsimple.com/blog/localhost-ssl-fix">here</a> and store the generated keys in the 'whiteboard' folder.</p>
<p>Instructions for generating these files on windows can be found <a href="http://www.robbagby.com/iis/self-signed-certificates-on-iis-7-the-easy-way-and-the-most-effective-way/">here</a>.</p>
<p>Once these files have been generated and stored in the 'whiteboard' folder, you will need to alter the following code in 'whiteboard/bin/www':</p>

<code>
var options = {
  <br>
  &nbsp;&nbsp;key: fs.readFileSync('../[NAME OF KEY FILE]'),
  <br>
  &nbsp;&nbsp;cert: fs.readFileSync('../[NAME OF CERTIFICATE FILE]')
  <br>
};</code>


<h3>
<a id="xirsys" class="anchor" href="#xirsys" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XirSys</h3>

<p>You will also need to create a XirSys account. This can be done via their website:
<a href="https://xirsys.com/">https://xirsys.com/</a> </p>

<p>Once you have created an account you will need to enter the following details to the “user.json” file in the format outlined below:</p>

<div class="highlight highlight-source-js"><pre>{   
    <span class="pl-s"><span class="pl-pds">"</span>form<span class="pl-pds">"</span></span><span class="pl-k">:</span> 
    {
         <span class="pl-s"><span class="pl-pds">"</span>ident<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>UserName<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>secret<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>API_Authentication_Key<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>domain<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>YourDomain<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>application<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>YourApplication<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>room<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>YourRoom<span class="pl-pds">"</span></span>,
         <span class="pl-s"><span class="pl-pds">"</span>secure<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">1</span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>json<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">true</span>
}
</pre></div>

<h3>
<a id="smtp" class="anchor" href="#smtp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SMTP</h3>

<p>In order to make use of the invite email functionality you will also need to add an SMTP server.</p>

<p>A gmail account provides an SMTP server. This will need to be added to the invite.js file (whiteboard/routes/invite.js) as shown below:</p>

<p><code>var transporter = nodemailer.createTransport('smtps://&lt;YourDomain&gt;%40gmail.com:&lt;YourPassword&gt;@smtp.gmail.com');</code></p>

<p>A default SMTP server is currently utilised in the code. It is the following:
<code>var transporter = nodemailer.createTransport('smtps://whiteboardtest1%40gmail.com:Wh1t3board@smtp.gmail.com');</code></p>

<p>If you wish to add your own SMTP server this must be replaced.</p>

<h3>
<a id="addingNewContacts" class="anchor" href="#xirsys" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Adding New Contacts</h3>

<p>Currently displaying people that are available to invite is handled as part of InviteCtrl.js (whiteboard/public/js/controllers/InviteCtrl.js) as shown below:</p>

<div class="highlight highlight-source-js"><pre>
    {
         <span class="pl-s">id</span><span class="pl-k">:</span> <span class="pl-s">1</span>,
         <span class="pl-s">userImage</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://placehold.it/150x150<span class="pl-pds">'</span></span>,
         <span class="pl-s">name</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Name<span class="pl-pds">'</span></span>,
         <span class="pl-s">department</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Department<span class="pl-pds">'</span></span>,
         <span class="pl-s">email</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>testdepartment@kainos.com<span class="pl-pds">'</span></span>
    }
</pre></div>

<p>In order to add people to invite for this meeting their details will need to be added to this file in the appropriate format and each person must have a unique id. Therefore, if I wanted to add a second potential invitee I would add:</p>

<div class="highlight highlight-source-js"><pre>
    {
         <span class="pl-s">id</span><span class="pl-k">:</span> <span class="pl-s">1</span>,
         <span class="pl-s">userImage</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://placehold.it/150x150<span class="pl-pds">'</span></span>,
         <span class="pl-s">name</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Name<span class="pl-pds">'</span></span>,
         <span class="pl-s">department</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Department<span class="pl-pds">'</span></span>,
         <span class="pl-s">email</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>testdepartment@kainos.com<span class="pl-pds">'</span></span>
    },
    {
         <span class="pl-s">id</span><span class="pl-k">:</span> <span class="pl-s">2</span>,
         <span class="pl-s">userImage</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://placehold.it/150x150<span class="pl-pds">'</span></span>,
         <span class="pl-s">name</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Name2<span class="pl-pds">'</span></span>,
         <span class="pl-s">department</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Department2<span class="pl-pds">'</span></span>,
         <span class="pl-s">email</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>testdepartment2@kainos.com<span class="pl-pds">'</span></span>
    }
</pre></div>

<hr>

<h1>
<a id="connectingAnotherComputerToLocalHost" class="anchor" href="#connectingAnotherComputerToLocalHost" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Connecting Another Computer To LocalHost</h1>

<p>Once you have whiteboard running on your local machine, others will be able to join meetings that you host. To do this they must enter the IP address of your machine into their web browser in the following format:<br>
<p><code>http://IPADDRESS:3000</code></p>

<p> From here the user will be able to enter a meeting room pin or they can directly connect to a meeting by entering ammending their browser URL to the following:</p>
<p><code>http://IPADDRESS:3000/board/ROOMPIN</code></p>

<p> <b>NOTE:</b> You will be redirected to port 8000 in your browser. This is so as to migrate the program to a HTTPS server and allow other computers to connect to your localhost, provided you have generated a SSL key.

<hr>

<h1>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Testing</h1>

<p>To run associated tests Karma must be installed. To do this follow the instructions on the <a href="https://karma-runner.github.io/1.0/index.html">Karma website.</a> </p>

<p>Run karma start <code>karma.conf.js</code> from the whiteboard folder in terminal. Test output will be displayed in the terminal.</p>

<p><b>NOTE:</b> If you have added your own contacts then you will also need to edit InviteCtrlTests.js (whiteboard/test/unit/InviteCtrlTests.js).</p>

<p>You will need to edit the data stored in the variable "mockTableTestData" by replacing any existing contacts with the contacts you have added. The information must be entered in the following format and must match the information you have added to InviteCtrl.js:</p>

<div class="highlight highlight-source-js"><pre>
   [
    {
         <span class="pl-s">id</span><span class="pl-k">:</span> <span class="pl-s">1</span>,
         <span class="pl-s">userImage</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://placehold.it/150x150<span class="pl-pds">'</span></span>,
         <span class="pl-s">name</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Name<span class="pl-pds">'</span></span>,
         <span class="pl-s">department</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Department<span class="pl-pds">'</span></span>,
         <span class="pl-s">email</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>testdepartment@kainos.com<span class="pl-pds">'</span></span>
    },
    {
         <span class="pl-s">id</span><span class="pl-k">:</span> <span class="pl-s">2</span>,
         <span class="pl-s">userImage</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://placehold.it/150x150<span class="pl-pds">'</span></span>,
         <span class="pl-s">name</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Name2<span class="pl-pds">'</span></span>,
         <span class="pl-s">department</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Test Department2<span class="pl-pds">'</span></span>,
         <span class="pl-s">email</span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>testdepartment2@kainos.com<span class="pl-pds">'</span></span>
    }
   ]; 
</pre></div>
